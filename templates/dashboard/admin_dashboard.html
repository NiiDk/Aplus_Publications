{% extends 'base.html' %}

{% block title %}Admin Operational Hub | Aplus Publications{% endblock %}

{% block content %}
<div class="container mx-auto px-4 py-8">
    <div class="mb-10 border-b pb-6">
        <h1 class="text-3xl font-bold tracking-tight text-slate-900 italic">ADMIN OPERATIONAL HUB</h1>
        <p class="text-slate-500 text-sm uppercase tracking-widest mt-1 italic">Institutional Overview & Financial Metrics</p>
    </div>

    <!-- Stats Overview -->
    <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-10">
        <div class="bg-slate-900 text-white p-6 border-l-4 border-brandGreen shadow-sm">
            <p class="text-[10px] font-bold uppercase tracking-widest text-brandGreen mb-2 italic">Total Sales (Paid)</p>
            <p class="text-3xl font-bold tracking-tighter">GHS {{ total_sales|floatformat:2 }}</p>
        </div>
        <div class="bg-white p-6 border border-slate-200 border-l-4 border-brandBrown shadow-sm">
            <p class="text-[10px] font-bold uppercase tracking-widest text-slate-400 mb-2 italic">Orders (Today)</p>
            <p class="text-3xl font-bold tracking-tighter text-slate-900">{{ orders_today }}</p>
        </div>
        <div class="bg-white p-6 border border-slate-200 border-l-4 border-brandGreen shadow-sm">
            <p class="text-[10px] font-bold uppercase tracking-widest text-slate-400 mb-2 italic">Pending Bulk Quotes</p>
            <p class="text-3xl font-bold tracking-tighter text-slate-900">{{ pending_quotes }}</p>
        </div>
    </div>

    <div class="grid grid-cols-1 lg:grid-cols-3 gap-8">
        <!-- Live Order Feed -->
        <div class="lg:col-span-2">
            <section class="bg-white border rounded-sm shadow-sm overflow-hidden">
                <div class="bg-slate-50 border-b px-6 py-4 flex justify-between items-center">
                    <h2 class="text-xs font-bold uppercase tracking-widest text-slate-900 italic">Live Academic Order Feed</h2>
                    <span class="text-[10px] bg-brandGreen text-slate-900 px-2 py-0.5 font-bold uppercase tracking-tighter">System Real-time</span>
                </div>
                <div class="overflow-x-auto">
                    <table class="w-full text-left text-sm">
                        <thead class="bg-slate-50 text-slate-400 border-b">
                            <tr>
                                <th class="px-6 py-3 font-medium uppercase text-[10px]">Reference</th>
                                <th class="px-6 py-3 font-medium uppercase text-[10px]">Customer</th>
                                <th class="px-6 py-3 font-medium uppercase text-[10px]">Status</th>
                                <th class="px-6 py-3 font-medium uppercase text-[10px] text-right">Total</th>
                            </tr>
                        </thead>
                        <tbody class="divide-y">
                            {% for order in recent_orders %}
                            <tr class="hover:bg-slate-50 transition-colors">
                                <td class="px-6 py-4 font-mono text-[10px] text-slate-500">#{{ order.order_id|stringformat:".8s" }}</td>
                                <td class="px-6 py-4">
                                    <p class="font-bold text-slate-800">{{ order.full_name }}</p>
                                    <p class="text-[10px] text-slate-400">{{ order.email }}</p>
                                </td>
                                <td class="px-6 py-4">
                                    <span class="px-2 py-1 text-[10px] font-bold uppercase tracking-tighter rounded-full 
                                        {% if order.status == 'PAID' %}bg-green-100 text-green-700
                                        {% elif order.status == 'PENDING' %}bg-yellow-100 text-yellow-700
                                        {% else %}bg-slate-100 text-slate-700{% endif %}">
                                        {{ order.get_status_display }}
                                    </span>
                                </td>
                                <td class="px-6 py-4 text-right font-bold text-slate-900 italic">GHS {{ order.total_amount }}</td>
                            </tr>
                            {% empty %}
                            <tr>
                                <td colspan="4" class="px-6 py-12 text-center text-slate-400 italic">No orders recorded in the system yet.</td>
                            </tr>
                            {% endfor %}
                        </tbody>
                    </table>
                </div>
            </section>
        </div>

        <!-- Content Quick Links -->
        <div class="space-y-6">
            <section class="bg-white border p-6 rounded-sm shadow-sm">
                <h2 class="text-xs font-bold uppercase tracking-widest text-brandBrown mb-6 italic">Operational Shortcuts</h2>
                <div class="grid grid-cols-1 gap-3">
                    <a href="/admin/shop/textbook/add/" class="flex items-center justify-between p-3 border border-slate-100 bg-slate-50 hover:border-brandGreen transition group">
                        <span class="text-xs font-bold text-slate-700 uppercase tracking-tight">Add New Textbook</span>
                        <span class="text-brandGreen font-bold group-hover:translate-x-1 transition-transform">→</span>
                    </a>
                    <a href="/admin/resources/resource/add/" class="flex items-center justify-between p-3 border border-slate-100 bg-slate-50 hover:border-brandGreen transition group">
                        <span class="text-xs font-bold text-slate-700 uppercase tracking-tight">Upload Resource</span>
                        <span class="text-brandGreen font-bold group-hover:translate-x-1 transition-transform">→</span>
                    </a>
                    <a href="/admin/blog/post/add/" class="flex items-center justify-between p-3 border border-slate-100 bg-slate-50 hover:border-brandGreen transition group">
                        <span class="text-xs font-bold text-slate-700 uppercase tracking-tight">New Blog Article</span>
                        <span class="text-brandGreen font-bold group-hover:translate-x-1 transition-transform">→</span>
                    </a>
                    <a href="/admin/news/newsannouncement/add/" class="flex items-center justify-between p-3 border border-slate-100 bg-slate-50 hover:border-brandGreen transition group">
                        <span class="text-xs font-bold text-slate-700 uppercase tracking-tight">Post Announcement</span>
                        <span class="text-brandGreen font-bold group-hover:translate-x-1 transition-transform">→</span>
                    </a>
                </div>
            </section>

            <!-- System Info -->
            <section class="bg-slate-100 p-6 border-l-4 border-brandBrown rounded-sm">
                <h3 class="text-[10px] font-bold uppercase tracking-widest text-brandBrown mb-3 italic">System Integrity</h3>
                <p class="text-xs text-slate-600 leading-relaxed mb-4 italic">
                    All financial transactions and bulk quotations are monitored for academic compliance and institutional integrity.
                </p>
                <div class="text-[10px] text-slate-400 font-bold uppercase tracking-tighter">
                    Last Update: {% now "H:i" %} UTC
                </div>
            </section>
        </div>
    </div>
</div>
{% endblock %}
